# smartLight 多功能智能电子闹钟安卓端APP


# 摘要
时钟是人类的必须用品之一，从以前的机械时钟、到电子时钟、再到智能电子闹
钟，时钟在不断进步，消费者也在在智能化、人性化方面对时钟的功能提出更高的要
求。本文提出了一种可以通过手机 app 控制的智能电子闹钟，在基本的电子时钟的基
础上，使用了单片机及其配套的硬件电路和软件程序对时钟进行了智能化，加入了自
动同步时间、自定义闹钟、自定义 todo 任务的功能。

关键词：智能闹钟；单片机；手机app 

# 手机APP
手机 app 是本文从头开始设计并搭建的安卓端软件。其实现了通过蓝牙和下位机
连接并发送数据、设置时间和日期、设置闹钟和 TODO 任务这三大功能。这三个功能
会在手机 app 的最下方的选择栏中以三个按钮的形式体现，用户可以在这三个界面之
中轻易跳转，完成他们需要的操作。 
本文提出的手机 app 是运行在安卓端上的，使用 Java 代码进行编程，根据安卓手
机的特性贴身打造。本文在搭建手机 app 的时候大量使用了安卓官方提供的 Thread 类
进行异步运行，避免耗时间的操作堵塞用户界面，造成界面假死或者卡顿的问题。 

## 蓝牙管理页面 
本文提出的手机app 采用了安卓官方提供的蓝牙管理和 IO 管理 API，在 app 中实
现了建立蓝牙连接，发送、接收字节或者字符串的接口，实现了对蓝牙连接和数据收发
的一体化管理。 
除此之外，本文还根据下位机 EEPROM 的写入速度的特性，修改了蓝牙发送数据
的方式：由连续快速发送改为一次发送一个字节，发送的相邻字节之间间隔了一定的
时间。这样避免了下位机在写入 EEPROM 中写入的数据出现数据不全或者数据错误的
问题。 
数据的发送通过手动的方式进行：在用户设置好时间日期、闹钟以及 TODO 任务
之后，可以通过点击发送数据的按钮将设置好的信息全部发送给下位机接收。发送数
据的按钮存在状态检测的功能：如果当前手机 app 正在通过蓝牙在向下位机发送数据
时，按钮会变成灰色，无法重新点击该按钮。这样避免了数据的重复发送以及数据发送
时的混杂。 

## 时间和日期设置页面 
本文提出的 app 将闹钟使用的基础功能：设定时间页面放置在三个页面切换按钮
的最中间。本页面中存在三个按钮：手动设置时间、手动设置日期、自动设置时间和日
期，其中前两个按键会分别显示设置好的时间和日期，无论该设置好的日期是手动设
置的还是自动设置的。 
在用户点击其中一个手动设置的按钮时，相应的时间或者日期选择窗口就会在页
面上方弹出，用户可以在页面上选择需要设置的时间或者日期。本文提出的 app 会将
弹出的时间或者日期设置窗口的默认值设置为系统的当前时间，方便用户进行调整。 
在用户点击自动设置时间按钮时，手机 app 会从安卓系统中提取并自动设置手机
当前的时间和日期，并且将他们显示在上面两个手动设置的按钮上，方便与用户查看
并且调整。 

## 闹钟和 TODO 任务设置 
本文在手机 app 中的后端使用了 Room 数据库进行数据的管理，以方便用户对闹
钟和TODO 任务进行设置、更新和查看。本文在手机 app 中的闹钟和 TODO 设置页面
中搭建了添加新项目的按钮和查看现有项目的滚动列表。按下添加新项目的按钮可以
添加新的闹钟或者 TODO 任务，而点击滚动列表中的现有项目可以对被点击的闹钟或
者 TODO 任务进行修改。设置完成或者修改完成的项目会存储在数据库中，以供其自
身界面显示和蓝牙管理界面读取。如果用户需要删除任务，点击项目前面的圆圈即可。

# 软件UML图
![image](https://user-images.githubusercontent.com/77398134/180681121-74e73db3-129a-4e76-b8f5-352205a9f449.png)
